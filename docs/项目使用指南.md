# RuoYi-Vue 项目使用指南

**版本**: v1.0  
**创建日期**: 2025-01-14  
**适用版本**: RuoYi-Vue v3.9.0  

---

## 一、快速开始

### 1.1 环境准备

#### 必需软件
- **JDK**: 1.8 或更高版本
- **Maven**: 3.6 或更高版本  
- **MySQL**: 5.7 或更高版本
- **Redis**: 3.0 或更高版本
- **Node.js**: 8.9 或更高版本
- **NPM**: 3.0 或更高版本

#### 开发工具推荐
- **后端IDE**: IntelliJ IDEA / Eclipse
- **前端IDE**: VSCode / WebStorm
- **数据库工具**: Navicat / DataGrip
- **API测试**: Postman / Apifox

### 1.2 项目启动步骤

#### 第一步：数据库初始化
```sql
-- 1. 创建数据库
CREATE DATABASE ry CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci;

-- 2. 导入初始数据
-- 执行 sql/ry_20250522.sql 文件
```

#### 第二步：后端启动
```bash
# 1. 修改数据库配置
# 编辑 ruoyi-admin/src/main/resources/application-druid.yml
# 配置数据库连接信息

# 2. 修改Redis配置
# 编辑 ruoyi-admin/src/main/resources/application.yml
# 配置Redis连接信息

# 3. 启动后端服务
# Windows
ry.bat

# Linux
./ry.sh

# 或者使用Maven命令
mvn clean compile
cd ruoyi-admin
mvn spring-boot:run
```

#### 第三步：前端启动
```bash
# 1. 进入前端目录
cd ruoyi-ui

# 2. 安装依赖
npm install

# 3. 启动开发服务器
npm run dev

# 4. 构建生产版本
npm run build:prod
```

#### 第四步：访问系统
- **前端地址**: http://localhost:80
- **后端接口**: http://localhost:8080
- **默认账号**: admin / admin123

---

## 二、系统配置说明

### 2.1 数据库配置
```yaml
# ruoyi-admin/src/main/resources/application-druid.yml
spring:
  datasource:
    type: com.alibaba.druid.pool.DruidDataSource
    driverClassName: com.mysql.cj.jdbc.Driver
    druid:
      url: jdbc:mysql://localhost:3306/ry?useUnicode=true&characterEncoding=utf8&zeroDateTimeBehavior=convertToNull&useSSL=true&serverTimezone=GMT%2B8
      username: root
      password: password
```

### 2.2 Redis配置
```yaml
# ruoyi-admin/src/main/resources/application.yml
spring:
  redis:
    host: localhost
    port: 6379
    password: 
    database: 0
    timeout: 10s
```

### 2.3 文件上传配置
```yaml
# ruoyi-admin/src/main/resources/application.yml
ruoyi:
  # 文件上传路径 (Windows示例)
  profile: D:/ruoyi/uploadPath
  # 文件上传路径 (Linux示例)  
  # profile: /home/ruoyi/uploadPath
```

### 2.4 JWT配置
```yaml
# ruoyi-admin/src/main/resources/application.yml
token:
  header: Authorization
  secret: abcdefghijklmnopqrstuvwxyz
  expireTime: 30  # 30分钟
```

---

## 三、功能使用说明

### 3.1 用户管理
- **路径**: 系统管理 -> 用户管理
- **功能**: 新增、修改、删除用户，分配角色和部门
- **权限**: `system:user:list`, `system:user:add`, `system:user:edit`, `system:user:remove`

### 3.2 角色管理  
- **路径**: 系统管理 -> 角色管理
- **功能**: 创建角色，分配菜单权限和数据权限
- **数据权限类型**:
  - 全部数据权限
  - 自定数据权限
  - 部门数据权限
  - 部门及以下数据权限
  - 仅本人数据权限

### 3.3 菜单管理
- **路径**: 系统管理 -> 菜单管理
- **功能**: 配置系统菜单、按钮权限
- **菜单类型**:
  - 目录 (M)
  - 菜单 (C) 
  - 按钮 (F)

### 3.4 代码生成
- **路径**: 系统工具 -> 代码生成
- **使用步骤**:
  1. 创建数据库表
  2. 在代码生成页面导入表
  3. 编辑生成配置
  4. 预览并下载代码
  5. 将代码导入到项目中

---

## 四、开发指南

### 4.1 添加新模块

#### 后端开发步骤
```java
// 1. 创建实体类 (domain)
@Data
@TableName("sys_example")
public class SysExample extends BaseEntity {
    private Long id;
    private String name;
    // ...
}

// 2. 创建Mapper接口
@Mapper
public interface SysExampleMapper extends BaseMapper<SysExample> {
    // 自定义查询方法
}

// 3. 创建Service接口和实现
public interface ISysExampleService {
    List<SysExample> selectList(SysExample example);
}

@Service
public class SysExampleServiceImpl implements ISysExampleService {
    @Autowired
    private SysExampleMapper exampleMapper;
    // ...
}

// 4. 创建Controller
@RestController
@RequestMapping("/system/example")
public class SysExampleController extends BaseController {
    @Autowired
    private ISysExampleService exampleService;
    
    @GetMapping("/list")
    @PreAuthorize("@ss.hasPermi('system:example:list')")
    public TableDataInfo list(SysExample example) {
        // ...
    }
}
```

#### 前端开发步骤
```javascript
// 1. 创建API接口 (src/api/system/example.js)
import request from '@/utils/request'

export function listExample(query) {
  return request({
    url: '/system/example/list',
    method: 'get',
    params: query
  })
}

// 2. 创建页面组件 (src/views/system/example/index.vue)
<template>
  <div class="app-container">
    <!-- 查询条件 -->
    <!-- 表格数据 -->
    <!-- 分页组件 -->
  </div>
</template>

<script>
import { listExample } from '@/api/system/example'

export default {
  name: 'Example',
  data() {
    return {
      // ...
    }
  },
  methods: {
    getList() {
      // ...
    }
  }
}
</script>
```

### 4.2 权限控制

#### 后端权限注解
```java
// 方法级权限控制
@PreAuthorize("@ss.hasPermi('system:user:list')")
@PreAuthorize("@ss.hasRole('admin')")
@PreAuthorize("@ss.hasAnyRoles('admin,common')")
```

#### 前端权限控制
```javascript
// 路由权限
{
  path: '/system/user',
  component: Layout,
  meta: {
    permissions: ['system:user:list']
  }
}

// 按钮权限 (模板中)
<el-button 
  v-hasPermi="['system:user:add']"
  @click="handleAdd">
  新增
</el-button>

// 角色权限
<el-button 
  v-hasRole="['admin']"
  @click="handleAdmin">
  管理员操作
</el-button>
```

---

## 五、常见问题解决

### 5.1 启动问题

#### 问题1: 数据库连接失败
```
解决方案:
1. 检查MySQL服务是否启动
2. 确认数据库连接配置正确
3. 检查数据库用户权限
4. 确认数据库已创建并导入初始数据
```

#### 问题2: Redis连接失败
```
解决方案:
1. 检查Redis服务是否启动
2. 确认Redis连接配置正确
3. 检查Redis密码设置
4. 确认防火墙端口开放
```

#### 问题3: 前端启动失败
```
解决方案:
1. 检查Node.js版本是否符合要求
2. 清除npm缓存: npm cache clean --force
3. 删除node_modules重新安装: rm -rf node_modules && npm install
4. 检查网络连接，使用国内镜像源
```

### 5.2 功能问题

#### 问题1: 登录后白屏
```
解决方案:
1. 检查后端接口是否正常
2. 查看浏览器控制台错误信息
3. 检查用户权限配置
4. 确认菜单配置正确
```

#### 问题2: 文件上传失败
```
解决方案:
1. 检查文件上传路径配置
2. 确认上传目录存在且有写入权限
3. 检查文件大小限制配置
4. 确认文件类型允许上传
```

### 5.3 性能优化建议

#### 数据库优化
```sql
-- 1. 添加必要的索引
CREATE INDEX idx_user_name ON sys_user(user_name);
CREATE INDEX idx_create_time ON sys_oper_log(create_time);

-- 2. 定期清理日志数据
DELETE FROM sys_oper_log WHERE create_time < DATE_SUB(NOW(), INTERVAL 3 MONTH);
```

#### 缓存优化
```yaml
# Redis配置优化
spring:
  redis:
    lettuce:
      pool:
        max-active: 20
        max-idle: 10
        min-idle: 5
```

---

## 六、部署上线

### 6.1 生产环境配置

#### 后端配置
```yaml
# application-prod.yml
server:
  port: 8080
  
spring:
  datasource:
    druid:
      url: jdbc:mysql://prod-db:3306/ry?useSSL=true
      username: ${DB_USERNAME}
      password: ${DB_PASSWORD}
  redis:
    host: ${REDIS_HOST}
    password: ${REDIS_PASSWORD}

logging:
  level:
    com.ruoyi: info
    org.springframework: warn
```

#### 前端构建
```bash
# 构建生产版本
npm run build:prod

# 部署到Nginx
cp -r dist/* /usr/share/nginx/html/
```

### 6.2 Nginx配置
```nginx
server {
    listen 80;
    server_name your-domain.com;
    
    location / {
        root /usr/share/nginx/html;
        try_files $uri $uri/ /index.html;
    }
    
    location /dev-api/ {
        proxy_pass http://localhost:8080/;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
    }
}
```

---

## 七、扩展开发

### 7.1 集成第三方服务

#### 短信服务集成
```java
@Component
public class SmsService {
    
    public void sendSms(String phone, String message) {
        // 集成阿里云短信服务
        // 或腾讯云短信服务
    }
}
```

#### 文件存储集成
```java
@Component
public class OssService {
    
    public String upload(MultipartFile file) {
        // 集成阿里云OSS
        // 或腾讯云COS
        return "file-url";
    }
}
```

### 7.2 微服务改造建议
1. 使用Spring Cloud Gateway作为网关
2. 使用Nacos作为注册中心和配置中心
3. 使用Sentinel进行流量控制
4. 使用Seata处理分布式事务

---

## 八、总结

RuoYi-Vue是一个功能完善、架构清晰的企业级管理系统框架。通过本指南，您可以：

1. **快速上手**: 按照步骤快速搭建开发环境
2. **深入理解**: 掌握系统的核心功能和设计理念  
3. **扩展开发**: 基于框架开发自己的业务模块
4. **部署上线**: 将系统部署到生产环境

建议在使用过程中：
- 仔细阅读官方文档
- 积极参与社区讨论
- 关注版本更新和安全补丁
- 根据业务需求进行合理的定制化开发

**官方资源**:
- 官网: http://www.ruoyi.vip
- 文档: http://doc.ruoyi.vip
- Gitee: https://gitee.com/y_project/RuoYi-Vue
- 演示地址: http://vue.ruoyi.vip (admin/admin123)

---

*本指南会持续更新，如有问题请参考官方文档或社区支持。*
